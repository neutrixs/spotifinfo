palette="";const colour=new ColorThief;let img=document.getElementById("mainPicture");img.crossOrigin="Anonymous",img.addEventListener("load",function(){let a=colour.getColor(img).join(",");palette=[a,a],checkDarkPalette(palette[0]),checkLightPalette(palette[1]),setPalette()});const setPalette=function(){$("#nowPlaying").css("background-color",`rgb(${"false"==window.localStorage.dark?palette[1]:palette[0]})`)},checkDarkPalette=function(a){var b=Math.floor;a=a.split(",");let c=[...a];if(128<a.sort((c,a)=>c-a)[2]){let d=a[2]/128;for(i=0;i<c.length;i++)c[i]=b(c[i]/d);palette[0]=c.join(",")}else if(32>a.sort((c,a)=>c-a)[2]){let d=32/a[2];for(i=0;i<c.length;i++)c[i]=b(c[i]*d);palette[0]=c.join(",")}},checkLightPalette=function(a){a=a.split(",");let b=[...a];if(255>a.sort((c,a)=>c-a)[2]){let c=255/a[2];for(i=0;i<b.length;i++)b[i]=Math.floor(b[i]*c);palette[1]=b.join(",")}};