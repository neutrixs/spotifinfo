const getRecentlyPlayed=async function(){let t=await fetch("https://api.spotify.com/v1/me/player/recently-played?limit=50",{method:"GET",headers:{Authorization:window.localStorage.token}});if(t=await t.json(),t.error)401!=t.error.status&&400!=t.error.status||(await getToken(),await getRecentlyPlayed());else{let e="";for(i=0;i<t.items.length;i++){for(e+=`<div id="RecentlyPlayed${i}" class="listRecentlyPlayed"><div id="recentlyPlayed${i}ImageHolder" class="recentlyPlayedImageHolder"><img class="recentlyPlayedImage" src="${t.items[i].track.album.images[1].url}"></div><div id="recentlyPlayed${i}InfoHolder" class="recentlyPlayedInfoHolder"><p class="recentlyPlayedSongName">${t.items[i].track.name}</p><p class="recentlyPlayedArtistName">`,j=0;j<t.items[i].track.artists.length;j++)e+=`<span id="recent${i}artist${j}">${t.items[i].track.artists[j].name}</span>`,j!==t.items[i].track.artists.length-1&&(e+=", ");e+="</p></div></div>"}for($("#recentlyPlayedListHolder").html(e),e="",i=0;i<t.items.length;i++)e+=`$('#recentlyPlayed${i}InfoHolder').off().on('click',()=>{url = '${t.items[i].track.external_urls.spotify}';if(isMobile()){location.href = url}else{window.open(url)}});$('#recentlyPlayed${i}ImageHolder').off().on('click',()=>{url = '${t.items[i].track.album.external_urls.spotify}';if(isMobile()){location.href = url}else{window.open(url)}})\n`;eval(e),$("#recentlyPlayed").removeClass("none")}};isLoggedOut||getRecentlyPlayed();