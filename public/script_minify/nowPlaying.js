!function(){let a=[];const t=async function(){let e=await fetch("https://api.spotify.com/v1/me/player/currently-playing",{method:"GET",headers:{Authorization:window.localStorage.token}});if(e=await e.json(),e.error)400!=e.error.status&&401!=e.error.status||(await getToken(),await t());else if(nowPlayingStack=0,null!=e.item){e.item.name!==he.decode($("#mainTitle").html())&&(getRecentlyPlayed(),$("#mainPicture").attr("src",e.item.album.images[0].url)),a=[e.progress_ms,e.item.duration_ms,e.is_playing],$("#nowPlayingStatus").html(e.is_playing?"Now Playing:":"Last Played Song:"),null==e.item&&$("#nowPlaying").addClass("none"),$("#nowPlaying").removeClass("none"),$("#mainPicture").off().on("click",function(){isMobile()?location.href=e.item.album.external_urls.spotify:window.open(e.item.album.external_urls.spotify)}),$("#mainTitle").html(e.item.name).off().on("click",function(){isMobile()?location.href=e.item.external_urls.spotify:window.open(e.item.external_urls.spotify)});let t="";for(i=0;i<e.item.artists.length;i++)t+=`<span id="mainArtist${i}" class="pointer">${e.item.artists[i].name}</span>`,i<e.item.artists.length-1&&(t+=", ");for($("#mainArtist").html(t),temp="",i=0;i<e.item.artists.length;i++)temp+=`artist${i}url = '${e.item.artists[i].external_urls.spotify}';$('#mainArtist${i}').off().on('click',()=>{if(isMobile()){location.href = artist${i}url}else{window.open(artist${i}url)}})\n`;eval(temp),$("#nowPlaying").removeClass("none")}else $("#nowPlaying").addClass("none")};isLoggedOut||(t(),nowPlayingInterval=setInterval(t,2e3));let e=setInterval(()=>{var t,i,e,n;a[0]+=100,a[1]&&a[2]&&(n=a[0],e=a[1],t=Math.floor(e/6e4),i=((i=(Math.floor(e/1e3)%60).toString())<10?"0":"")+i,e=Math.floor(n/6e4),n=((n=(Math.floor(n/1e3)%60).toString())<10?"0":"")+n,$("#mainProgress").html(e+":"+n+" / "+t+":"+i))},100)}();