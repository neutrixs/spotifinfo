"use strict";(self.webpackChunkspotifinfo=self.webpackChunkspotifinfo||[]).push([[866],{692:(n,t,e)=>{e.d(t,{G:()=>a});var i,r=e(294),o=(i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},i(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),a=function(n){function t(t){return n.call(this,t)||this}return o(t,n),t.prototype.render=function(){return r.createElement("div",{id:"recaptchaBrandingHolder"},r.createElement("span",null,"This site is protected by reCAPTCHA and the Google "),r.createElement("a",{className:"branding "+(this.props.isDark?"":"brandingLight "),href:"https://policies.google.com/privacy",target:"_blank"},"Privacy Policy "),r.createElement("span",null,"and "),r.createElement("a",{className:"branding "+(this.props.isDark?"":"brandingLight "),href:"https://policies.google.com/terms",target:"_blank"},"Terms of Service "),r.createElement("span",null,"apply."))},t}(r.Component)},866:(n,t,e)=>{e.r(t),e.d(t,{default:()=>O});var i=e(294),r=e(263),o=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(n){try{c(i.next(n))}catch(n){o(n)}}function s(n){try{c(i.throw(n))}catch(n){o(n)}}function c(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,s)}c((i=i.apply(n,t||[])).next())}))},a=function(n,t){var e,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(n,a)}catch(n){o=[6,n],i=0}finally{e=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function s(){return o(this,void 0,void 0,(function(){var n,t,e,o,s,c=this;return a(this,(function(a){switch(a.label){case 0:return[4,fetch("https://api.spotify.com/v1/me/player/currently-playing",{method:"GET",headers:{authorization:window.localStorage.token}})];case 1:return 204==(n=a.sent()).status?(this.setState({classNone:!0}),[2]):400!=n.status&&401!=n.status?[3,3]:(clearInterval(this.state.nowPlayingInterval),[4,(0,r.LP)()]);case 2:return a.sent(),this.getNowPlaying(),this.setState({nowPlayingInterval:setInterval((function(){c.getNowPlaying()}),2e3)}),[2];case 3:return[4,n.json()];case 4:if(!(t=a.sent()).item)return this.setState({classNone:!0}),[2];for(t.is_playing?this.setState({isPlaying:!0}):this.setState({isPlaying:!1}),t.item.name!==this.state.nowPlayingTitle&&this.state.nowPlayingTitle&&this.props.getRecentlyPlayed(),e=[],o=0;o<t.item.artists.length;o++)s=t.item.artists[o],e.push(i.createElement("span",{key:s.id+"_hold"},i.createElement("a",{key:s.id,id:"nowPlayingArtists"+o.toString(),href:s.external_urls.spotify},s.name),o!==t.item.artists.length-1?i.createElement("span",{key:s.id+"_comma"},", "):null));return this.setState({nowPlayingTitle:t.item.name,nowPlayingTitleLink:t.item.external_urls.spotify,albumArtSrc:t.item.album.images[0].url,albumArtLinkSrc:t.item.album.external_urls.spotify,Artists:e,nowPlayingProgress:{currentMs:t.progress_ms,totalMs:t.item.duration_ms,isPlaying:t.is_playing}}),this.setState({classNone:!1}),[2]}}))}))}function c(){if(this.state.nowPlayingProgress.isPlaying&&(this.setState((function(n){return{nowPlayingProgress:{currentMs:n.nowPlayingProgress.currentMs+100,totalMs:n.nowPlayingProgress.totalMs,isPlaying:n.nowPlayingProgress.isPlaying}}})),!(this.state.nowPlayingProgress.currentMs>this.state.nowPlayingProgress.totalMs))){var n=this.state.nowPlayingProgress.currentMs,t=this.state.nowPlayingProgress.totalMs,e=Math.floor(n/6e4).toString(),i=Math.floor(n/1e3)%60;i=(i<10?"0":"")+i.toString();var r=Math.floor(t/6e4).toString(),o=Math.floor(t/1e3)%60,a=e+":"+i+" / "+r+":"+(o=(o<10?"0":"")+o.toString());this.setState({nowPlayingProgressStr:a})}}var u=function(){var n=parseFloat(window.getComputedStyle(document.body).getPropertyValue("font-size")),t=21.5*n/(window.innerWidth-(this.props.classNowPlayingMobile?3:23*n))<.5;this.setState({nowPlayingInfoHolderSide:!!t})},l=function(){return l=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},l.apply(this,arguments)},f=function(n){var t,e,i,r,o,a,s,c,u,l,f,h;return t=n[0]/255,e=n[1]/255,i=n[2]/255,u=Math.max(t,e,i),f=function(n){return(u-n)/6/l+.5},h=function(n){return Math.round(100*n)/100},0==(l=u-Math.min(t,e,i))?s=c=0:(c=l/u,r=f(t),o=f(e),a=f(i),t===u?s=a-o:e===u?s=1/3+r-a:i===u&&(s=2/3+o-r),s<0?s+=1:s>1&&(s-=1)),{h:Math.round(360*s),s:h(100*c),v:h(100*u)}},h=function(n){var t=1/255*n[0],e=1/255*n[1],i=1/255*n[2];return Math.sqrt(.299*Math.pow(t,2)+.587*Math.pow(e,2)+.114*Math.pow(i,2))},y=function(n,t){var e=function(n){var t=n[0],e=n[1],i=n[2];t/=255,e/=255,i/=255;var r,o,a=Math.max(t,e,i),s=Math.min(t,e,i),c=(a+s)/2;if(a==s)r=o=0;else{var u=a-s;switch(o=c>.5?u/(2-a-s):u/(a+s),a){case t:r=(e-i)/u+(e<i?6:0);break;case e:r=(i-t)/u+2;break;case i:r=(t-e)/u+4}r/=6}return[r,o,c]}(n);return e[2]+=t/100,n=function(n){var t,e,i,r=n[0],o=n[1],a=n[2];if(0==o)t=e=i=a;else{var s=function(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+(t-n)*(2/3-e)*6:n},c=a<.5?a*(1+o):a+o-a*o,u=2*a-c;t=s(u,c,r+1/3),e=s(u,c,r),i=s(u,c,r-1/3)}return[Math.round(255*t),Math.round(255*e),Math.round(255*i)]}(e),n},d=function(n,t,e,i){for(var r=0;r<100;r++){t=y(t,n?1:-1);var o=h(t);if(e<o&&o<i)break}return t},v=function(n,t,e){var i=h(n);i<t?n=d(!0,n,t,e):i>e&&(n=d(!1,n,t,e));for(var r=0;r<3;r++)n[r]=Math.round(n[r]);return n},w=function(n,t,e){if(e||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return n.concat(i||Array.prototype.slice.call(t))},g=new window.ColorThief;function p(){var n=document.getElementById("albumArt"),t=g.getPalette(n,5),e=t[function(n){for(var t=[],e=0;e<n.length;e++)t[e]=l({},f(n[e])),t[e].indexNo=e;return t.sort((function(n,t){return t.s-n.s})),t[0].indexNo}(w([],t,!0))],i=[e,e];i[0]=v(i[0],.35,.45),i[1]=v(i[1],.7,.8),this.setState({palette:i})}var b,m=(b=function(n,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},b(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}b(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),P=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(n){try{c(i.next(n))}catch(n){o(n)}}function s(n){try{c(i.throw(n))}catch(n){o(n)}}function c(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,s)}c((i=i.apply(n,t||[])).next())}))},k=function(n,t){var e,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(n,a)}catch(n){o=[6,n],i=0}finally{e=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},M=function(n){function t(t){var e=n.call(this,t)||this;return e.t=u.bind(e),e.i=p.bind(e),e.state={nowPlayingInterval:void 0,nowPlayingProgressInterval:void 0,isPlaying:!1,albumArtSrc:"",albumArtLinkSrc:"",nowPlayingTitle:"",nowPlayingTitleLink:"",Artists:null,nowPlayingProgress:{currentMs:null,totalMs:null,isPlaying:!1},nowPlayingProgressStr:"",classNone:!0,nowPlayingInfoHolderSide:!0,palette:void 0},e}return m(t,n),t.prototype.componentDidMount=function(){var n=this;this.getNowPlaying(),this.setState({nowPlayingInterval:setInterval((function(){n.getNowPlaying()}),2e3)}),this.nowPlayingProgress(),this.setState({nowPlayingProgressInterval:setInterval((function(){n.nowPlayingProgress()}),100)}),window.addEventListener("resize",this.t),setTimeout(u.bind(this),10);var t=document.getElementById("albumArt");t.crossOrigin="anonymous",t.addEventListener("load",this.i)},t.prototype.componentWillUnmount=function(){clearInterval(this.state.nowPlayingInterval),clearInterval(this.state.nowPlayingProgressInterval),window.removeEventListener("resize",this.t),document.getElementById("albumArt").removeEventListener("load",this.i)},t.prototype.nowPlayingProgress=function(){c.bind(this)()},t.prototype.getNowPlaying=function(){return P(this,void 0,void 0,(function(){return k(this,(function(n){switch(n.label){case 0:return[4,s.bind(this)()];case 1:return n.sent(),[2]}}))}))},t.prototype.setPalette=function(n){return this.state.palette?"rgb("+this.state.palette[n?0:1].join(",")+")":""},t.prototype.render=function(){return i.createElement("div",{id:"nowPlaying",className:"nowPlayingHolder "+(this.state.classNone?"none ":"")+(this.props.classNowPlayingMobile?"nowPlayingHolderMobile ":""),style:{backgroundColor:this.setPalette(this.props.isDark)}},i.createElement("p",{id:"status"},this.state.isPlaying?"Now Playing:":"Last Played Song:"),i.createElement("a",{id:"albumArtHolder",href:this.state.albumArtLinkSrc},i.createElement("img",{id:"albumArt",src:this.state.albumArtSrc})),i.createElement("div",{className:"infoHolder "+(this.state.nowPlayingInfoHolderSide?"infoHolderSide ":"")},i.createElement("a",{id:"title",href:this.state.nowPlayingTitleLink},this.state.nowPlayingTitle),i.createElement("p",{id:"artists"},this.state.Artists),i.createElement("p",{id:"progress"},this.state.nowPlayingProgressStr)))},t}(i.Component),N=e(692),_=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),S=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(n){try{c(i.next(n))}catch(n){o(n)}}function s(n){try{c(i.throw(n))}catch(n){o(n)}}function c(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,s)}c((i=i.apply(n,t||[])).next())}))},A=function(n,t){var e,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(n,a)}catch(n){o=[6,n],i=0}finally{e=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},T=function(n){function t(t){var e=n.call(this,t)||this;return e.state={data:[],classNone:!0},e.getRecentlyPlayed=e.getRecentlyPlayed.bind(e),e.props.setGetRecentlyPlayedFunction(e.getRecentlyPlayed),e}return _(t,n),t.prototype.componentDidMount=function(){this.getRecentlyPlayed()},t.prototype.structureData=function(n){for(var t,e,r=[],o=0,a=0;a<(null===(t=n.items)||void 0===t?void 0:t.length);a++){var s=n.items[a].track,c=s.id+a.toString();e=new Date(n.items[a].played_at).toLocaleDateString("en-GB",{dateStyle:"medium"}),+new Date(e)!==o&&(o=+new Date(e),r.push(i.createElement("p",{key:c+"_date_0",className:"playedDate"},i.createElement("span",null,e)))),r.push(i.createElement("div",{className:"each",key:c},i.createElement("a",{className:"artHolder",href:s.album.external_urls.spotify,key:c+"_1"},i.createElement("img",{className:"recentlyPlayedArt",src:s.album.images[1].url,key:c+"_2"})),i.createElement("a",{className:"infoHolder",href:s.external_urls.spotify,key:c+"_3"},i.createElement("p",{className:"songName",key:c+"_4"},s.name),i.createElement("p",{className:"artistsName",key:c+"_5"},s.artists.map((function(n){return n.name})).join(", ")))))}this.setState({data:r,classNone:!1})},t.prototype.getRecentlyPlayed=function(){return S(this,void 0,void 0,(function(){var n,t;return A(this,(function(e){switch(e.label){case 0:return"https://api.spotify.com/v1/me/player/recently-played?limit=50",[4,fetch("https://api.spotify.com/v1/me/player/recently-played?limit=50",{method:"GET",headers:{Authorization:window.localStorage.token}})];case 1:return 401!=(n=e.sent()).status&&400!=n.status?[3,4]:[4,(0,r.LP)()];case 2:return e.sent(),[4,this.getRecentlyPlayed()];case 3:return e.sent(),[2];case 4:return[4,n.json()];case 5:return t=e.sent(),this.structureData(t),[2]}}))}))},t.prototype.render=function(){return i.createElement("div",{id:"recentlyPlayed",className:this.state.classNone?"none ":""},i.createElement("p",{id:"title"},"Recently Played:"),i.createElement("div",null,this.state.data))},t}(i.Component),j=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();const O=function(n){function t(t){var e=n.call(this,t)||this;return e.state={additionalPageStyle:"",pageStyleTransition:"",classNowPlayingMobile:!1,pageClassNone:"none",getRecentlyPlayed:function(){}},e.setGetRecentlyPlayedFunction=e.setGetRecentlyPlayedFunction.bind(e),e.mobileListener=e.mobileListener.bind(e),e}return j(t,n),t.prototype.componentDidMount=function(){this.mobileListenerFirst()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.mobileListener)},t.prototype.setGetRecentlyPlayedFunction=function(n){this.setState({getRecentlyPlayed:n})},t.prototype.mobileListener=function(){var n=parseFloat(window.getComputedStyle(document.body).getPropertyValue("font-size")),t=window.innerWidth/n<66;this.setState({additionalPageStyle:t?"pageMobile":"",classNowPlayingMobile:!!t})},t.prototype.mobileListenerFirst=function(){this.mobileListener(),this.setState({pageClassNone:"",pageStyleTransition:"transition300ms"}),window.addEventListener("resize",this.mobileListener)},t.prototype.render=function(){var n=this.state.classNowPlayingMobile;return i.createElement("div",{id:"page",className:this.state.pageStyleTransition+" "+this.state.additionalPageStyle+" "+this.state.pageClassNone},i.createElement(M,{getRecentlyPlayed:this.state.getRecentlyPlayed,classNowPlayingMobile:n,isDark:this.props.isDark}),i.createElement(T,{setGetRecentlyPlayedFunction:this.setGetRecentlyPlayedFunction}),i.createElement(N.G,{isDark:this.props.isDark}))},t}(i.Component)}}]);